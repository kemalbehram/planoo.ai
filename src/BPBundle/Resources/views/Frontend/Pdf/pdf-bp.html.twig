{% set nameCorporate = information.nameCorporate %}
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <title>Business plan - {{ nameCorporate }}</title>
        <meta name="description" content=""/>
        <meta name="keywords" content=""/>
        <!-- import favicon -->
        <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,{{ iz_identification_partner_service.favicon32Base64 }}" sizes="32x32" />
        <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,{{ iz_identification_partner_service.favicon16Base64 }}" sizes="16x16" />
        <!-- import icon font-awesome-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
        <!--Import Google Icon Font-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--Import Font glegoo & Sacramento & lato -->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
        <!-- Import CSS file -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

        {{ encore_entry_link_tags('apppdf') }}
        {{ encore_entry_link_tags(iz_identification_partner_service.partnerPdfColorCssPath) }}
    </head>
    <body class="white">

        {% set infoAnnuel = bp.getInfoAnnuel %}
        {% set page = 0 %}

        {% set pretBancaires = 0 %}
        {% for funding in bp.fundings if funding.detailEmpruntBancaire is not empty %}
            {% set pretBancaires = pretBancaires + 1 %}           
        {% endfor %}

        {% set trialMode = bp.isTrialActive %}

        <!-- BLOC_BODY -->
        <div class="main">



            <!-- ============================================================= -->
            <!-- page de garde =============================================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <div class="row">
                        <!-- LOGO -->
                        {%if white_mark %}
                            <div class="col s4">
                                <div class="logo">
                                    <img src="data:image/png;base64,{{ iz_identification_partner_service.partnerLogoBase64 }}" alt="logo_partenaire">
                                </div>
                            </div>
                        {% else %}
                            <div class="col s4">
                                <div class="logo">
                                    <img src="{{ absolute_url(asset('build/images/planoo.ai_390x112.png')) }}" alt="logo">
                                </div>
                            </div>
                            {% if iz_identification_partner_service.partnerLogoBase64 != null %}
                                <div class="col s4 offset-s4">
                                    <div class="logo">
                                        <img src="data:image/png;base64,{{ iz_identification_partner_service.partnerLogoBase64 }}" alt="logo_partenaire">
                                    </div>
                                </div>
                            {% endif %}
                        {% endif %}
                    </div>
                    <!-- /LOGO -->
                    <!-- BODY -->
                    <div class="row bloc-home">
                        <h4 class="center main-title"><b>{{ nameCorporate }}</b><hr>Business Plan</h4>
                    </div>
                    <div class="row">
                        {% if information.logo != null %}
                            <div class="col s12 logo-client main-title">
                                <img src="{{ absolute_url(asset(information.uploadDir~information.logo)) }}" alt="logo-client">
                            </div>
                        {% endif %}
                    </div>
                    <!-- /BODY -->
                </div>
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div><b>{{ nameCorporate }} </b> &nbsp;&nbsp;|&nbsp;&nbsp;<span> {{ information.address.street ~ ' ' ~ information.address.codePostal ~ ' ' ~ information.address.city }}</span></div>
                </div>
            </div>

            <!-- ============================================================= -->
            <!-- Sommaire ==================================================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Sommaire</h3><hr>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col s6">
                            <ul class="collection with-header">
                                <li class="collection-header"><h4>Compte de Résultat et Activité</h4></li>
                                <li class="collection-item"><div>Compte de résultat</div></li>
                                    {% if bp.produits is not empty %}
                                    <li class="collection-item"><div>Chiffre d'affaires</div></li>
                                    <li class="collection-item"><div>Marge Brute</div></li>
                                    {% endif %}
                                    {% if  chargesVariables is not empty%}
                                    <li class="collection-item"><div>Charges variables</div></li>
                                    {% endif %}
                                    {% if  chargesExternes is not empty%}
                                    <li class="collection-item"><div>Charges externes</div></li>
                                    {% endif %}
                                    {% if chargesDeDePersonnel != null %}
                                    <li class="collection-item"><div>Charges de personnel</div></li>
                                    {% endif %}
                            </ul>
                            <ul class="collection with-header">
                                <li class="collection-header"><h4>Bilan et Prévisions de trésorerie</h4></li>
                                <li class="collection-item"><div>Bilan<span class="secondary-content"></span></div></li>
                                        {% if  bp.investissements is not empty%}
                                    <li class="collection-item"><div>Investissements</div></li>
                                    {% endif %}

                                {% if  pretBancaires > 0 %}
                                    <li class="collection-item"><div>Dettes financières</div></li>
                                    {% endif %}
                                <li class="collection-item"><div>Tableau de flux de trésorerie</div></li>

                            </ul>
                        </div>
                        <div class="col s6">
                            <ul class="collection with-header">
                                <li class="collection-item"><h4>Indicateurs clés d'activité</h4></li>
                                <li class="collection-item"><div>Indicateurs clés d'activité</div></li>
                                <li class="collection-item"><h4>Etats financiers mensuels</h4></li>
                                    {% for key, exercice in bp.exercices %}
                                    <li class="collection-item"><div>Mensuel - Année {{ exercice.dateFin|date('Y') }}</div></li>
                                    {% endfor %}
                            </ul>

                            <ul class="collection with-header">
                                <li class="collection-header"><h4>Appendice</h4></li>
                                <li class="collection-item"><div>Lexique</div></li>
                                    {%if not white_mark %}
                                    <li class="collection-item"><div>Conditions générales de vente</div></li>
                                    {% endif %}
                            </ul>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">
                        <div class="title">
                        </div>
                    </div>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- /FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Glossaire =================================================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Glossaire</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">
                        <div class="col s6">
                            <ul class="collection with-header">
                                <li class="collection-item"><div><i class="text_color num left">BP</i> Business Plan (Plan d'Affaires)</div></li>
                                <li class="collection-item"><div><i class="text_color num left">P&L</i> Profit & Loss (Compte de résultat)</div></li>
                                <li class="collection-item"><div><i class="text_color num left">CA</i> Chiffre d’Affaires</div></li>
                                <li class="collection-item"><div><i class="text_color num left">MB</i> Marge Brute</div></li>
                                <li class="collection-item"><div><i class="text_color num left">MSCV</i >Marge sur coûts variables</div></li>
                                <li class="collection-item"><div><i class="text_color num left">VA</i> Valeur Ajoutée</div></li>
                                <li class="collection-item"><div><i class="text_color num left">EBITDA</i> Earnings Before Interest taxes Depreciation and Amortization</div></li>
                                <li class="collection-item"><div><i class="text_color num left">EBE</i> Excédent Brut d’Exploitation</div></li>
                                <li class="collection-item"><div><i class="text_color num left">EBIT</i> Earnings Before Interest taxes</div></li>
                                <li class="collection-item"><div><i class="text_color num left">REx</i> Résultat d’Exploitation</div></li>

                            </ul>
                        </div>
                        <div class="col s6">
                            <ul class="collection with-header">
                                <li class="collection-item"><div><i class="text_color num left">TO</i>  Taux d’Obsolescence</div></li>
                                <li class="collection-item"><div><i class="text_color num left">TR</i>  Taux de Remboursement</div></li>
                                <li class="collection-item"><div><i class="text_color num left">CP</i>  Capitaux Propres</div></li>
                                <li class="collection-item"><div><i class="text_color num left">DFN</i> Dette Financière Nette</div></li>
                                <li class="collection-item"><div><i class="text_color num left">C/C</i> Compte Courant</div></li>
                                <li class="collection-item"><div><i class="text_color num left">BFR</i> Besoin en Fonds de Roulement</div></li>
                                <li class="collection-item"><div><i class="text_color num left">EFR</i> Excédent en Fonds de Roulement</div></li>
                                <li class="collection-item"><div><i class="text_color num left">TVA</i> Taxe sur la Valeur Ajoutée</div></li>
                                <li class="collection-item"><div><i class="text_color num left">IS</i>  Impots sur les Sociétés</div></li>
                                <li class="collection-item"><div><i class="text_color num left">TFT</i> Tableau des Flux de Trésorerie</div></li>
                            </ul>
                        </div>
                    </div>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- 1 theme - business plan ===================================== -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- BODY -->

                    <h1 class="center">Compte de Résultat et Activité<hr></h1>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Compte de résultat ========================================== -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- TITLE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Compte de résultat</h3><hr>
                        </div>
                    </div>
                    <!-- /TITLE -->
                    <!-- BODY -->
                    <div class="row">

                        <div class="col s6">
                            <h5 class="flow-text">{{ nameCorporate }} - Business Plan prévisionnel sur {{ infoAnnuel|length }} ans</h5>
                            <table>

                                <thead class="color">
                                    <tr>
                                        <th width="30%">Nature €</th>
                                            {% for key in bp.getInfoAnnuel|keys %}
                                            <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Chiffre d'affaires</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].ca|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Achats de marchandises et sous-traitance</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].achat|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Marge brute</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].margeBrute|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Commissions</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].commission|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Charges variables sur charges externes</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].chargeVariableSurChargeExterne|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Marge sur coûts variables</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].margeSurCoutVariable|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Charges externes</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].chargeFixe|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Personnel</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ (infoAnnuel[key].chargePersonnel)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Charges patronales</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ (infoAnnuel[key].chargePatronale)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Charges sociales d'exploitation</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ (infoAnnuel[key].chargeSocialeExploit)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Impôts et taxes</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].impotEtTaxe|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>EBE</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].ebe|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Amortissements</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].amortissement|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Résultat d'exploitation</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].resultatExploitation|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat financier</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].resultatFinancier|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat exceptionnel</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>-</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subventions non remboursables</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].subventionNonRemboursable|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Impôt sur les sociétés</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].impotSurSociete|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Résultat net</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].resultatNet|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td colspan="3"><b>KPI</b></td>
                                    </tr>
                                    <tr class="text_color">
                                        <td>Taux de marge brute</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].margeBrute / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Taux de marge sur coûts variables</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].margeSurCoutVariable / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Taux d'EBE</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].ebe / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Taux de Résultat d'Exploitation</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].resultatExploitation / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Taux de Résultat Net</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].resultatNet / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s6 info">
                            <div class="row z-depth-1">
                                <div class="col s12 color">
                                    <h5 class="padding_block"><i class="material-icons left">info</i>Compte de résultat (P&L)</h5>
                                </div>
                                <div class="col s12 ">
                                    <p class="padding_block">Le compte de résultat est un document comptable synthétisant l'ensemble des
                                        charges et des produits d'une entreprise pour une période donnée, appelée
                                        exercice comptable, ayant pour but d'indiquer la performance de l'entreprise.
                                        Les indicateurs clés sont le chiffre d'affaires, la marge brute, l’EBE, le résultat
                                        d'exploitation et le résultat net. </p>
                                    <p class="padding_block"><b>Evolutions de l’Excédent Brut d’Exploitation (EBE) </b></p>
                                    <p class="padding_block">Le graphique d'évolution de l’EBE ci-dessous décrit l’évolution de votre performance opérationnelle sur l'ensemble de la période du plan d'affaires, à travers l’évolution de vos produits et charges  :</p>
                                    {% if trialMode %}
                                        <div id="cr" class='center-align' style="padding: 190px; min-width: 310px; max-width: 800px; height: 400px; border: solid 1px">Graphique indisponible pendant la période d'essai</div>
                                    {% else %}
                                        <div id="cr" data-chart="{{ chartCompteResultatJson|json_encode() }}"></div>
                                    {% endif %}
                                    
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Chiffre d'affaires ========================================== -->
            <!-- ============================================================= -->

            {% set arraySommeCA = [] %}
            {% set arrayVolumeProduit = [] %}
            {% for batch_produits in bp.produits|batch(12) %}
                <div class="card">
                    <div class="card-content">
                        <!-- TITLE -->
                        <div class="row">
                            <div class="col s4">
                                <h3>Chiffre d'affaires {% if loop.length>1 %}{{loop.index}}/{{loop.length}}{% endif %}</h3><hr>
                            </div>
                        </div>
                        <!-- /TITLE -->
                        <!-- BODY -->
                        <div class="row">
                            <div class="col s5">
                                <h5 class="flow-text">{{ nameCorporate }} - Détail du chiffre d'affaires</h5>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col {% if loop.first %}s7{%else%}s12{%endif%}">

                                <table>
                                    <thead class="color">
                                        <tr>
                                            <th width="30%">Nature €</th>
                                                {% for key in bp.getInfoAnnuel|keys %}
                                                <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                {% endfor %}
                                        </tr>
                                    </thead>

                                    <tbody>
                                        {% for produit in batch_produits %}
                                            <tr>
                                                <td>{{ produit.name }}</td>
                                                {% for infoProduit in produit.infoProduct %}
                                                    <td>{{ infoProduit.CAExercice|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                    {% if arraySommeCA[loop.index0~'_'] is defined %}
                                                        {% set value = arraySommeCA[loop.index0~'_'] + infoProduit.CAExercice %}
                                                        {% set arraySommeCA = arraySommeCA|merge({ (loop.index0~'_'): value}) %}
                                                    {% else %}
                                                        {% set arraySommeCA = arraySommeCA|merge({ (loop.index0~'_') : infoProduit.CAExercice}) %}
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        {% endfor %}
                                        <tr class="color">
                                            <td>{% if loop.last %}Total{% else %}Sous-Total global{% endif %} chiffre d'affaires</td>
                                            {% for sommeCA in arraySommeCA %}
                                                <td>{{ sommeCA }}</td>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>

                                {% if bp.effetVolumeMixPrix is not null %}
                                    <br><span class="flow-text"> {{ nameCorporate }} - Détail des quantités</span>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>

                                            {% for produit in batch_produits %}
                                                <tr>
                                                    <td>{{ produit.name }}</td>
                                                    {% for key, infoProduit in produit.infoProduct %}
                                                        {% if arrayVolumeProduit[key~"_"] is defined %}
                                                            {% set value = arrayVolumeProduit[key~"_"] + infoProduit.nbVente %}
                                                            {% set arrayVolumeProduit = arrayVolumeProduit|merge({(key~"_") : value}) %}
                                                        {% else %}
                                                            {% set arrayVolumeProduit = arrayVolumeProduit|merge({(key~"_") : infoProduit.nbVente}) %}
                                                        {% endif %}
                                                        <td>{{ infoProduit.nbVente }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total global{% endif %} quantité</td>
                                                {% for volume in arrayVolumeProduit %}
                                                    <td>{{ volume }}</td>
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>

                                    {% if loop.last %}
                                        <br><span class="flow-text"> {{ nameCorporate }} - Détail de la variation du chiffre d'affaires</span>
                                        <table>
                                            <thead class="color">
                                                <tr>
                                                    <th width="30%">Nature €</th>
                                                        {% for key in bp.getInfoAnnuel|keys %}
                                                        <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                        {% endfor %}
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="text_color">
                                                    <td>Effet volume</td>
                                                    {% set sommeEffetParAnnee = [] %}
                                                    {% set sommeProduitM = [] %}
                                                    {% set sommeProduitP = [] %}
                                                    {% for key, exercice in bp.exercices %}
                                                        {% set sommeProduitV = 0 %}
                                                        {% set annee = exercice.dateDebut|date('mY') %}
                                                        {% if bp.effetVolumeMixPrix[annee] is defined %}
                                                            {% for produitVMP in bp.effetVolumeMixPrix[annee].produits %}
                                                                {% set sommeProduitV = sommeProduitV + (produitVMP.effetVolume) %}

                                                                {% if sommeProduitM[annee~'_'] is defined %}
                                                                    {% set value = sommeProduitM[annee~'_'] + produitVMP.effetMix %}
                                                                    {% set sommeProduitM = sommeProduitM|merge({ (annee~'_'): value }) %}
                                                                {% else %}
                                                                    {% set sommeProduitM = sommeProduitM|merge({ (annee~'_'): produitVMP.effetMix }) %}
                                                                {% endif %}

                                                                {% if sommeProduitP[annee~'_'] is defined %}
                                                                    {% set value = sommeProduitP[annee~'_'] + produitVMP.effetPrix %}
                                                                    {% set sommeProduitP = sommeProduitP|merge({(annee~'_') : value}) %}
                                                                {% else %}
                                                                    {% set sommeProduitP = sommeProduitP|merge({(annee~'_') : produitVMP.effetPrix}) %}
                                                                {% endif %}
                                                            {% endfor %}
                                                            <td>{{ sommeProduitV|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>-</td>
                                                        {% endif %}

                                                        {% if loop.first == false %}
                                                            {% set valeurTotale = sommeProduitV + sommeProduitM[annee~'_'] + sommeProduitP[annee~'_'] %}
                                                            {% set sommeEffetParAnnee = sommeEffetParAnnee|merge({(annee~'_') : valeurTotale}) %}
                                                        {% endif %}

                                                    {% endfor %}
                                                </tr>
                                                <tr class="text_color">
                                                    <td>Effet mix</td>
                                                    {% for exercice in bp.exercices %}
                                                        {% set annee = exercice.dateDebut|date('mY') %}
                                                        {% if sommeProduitM[annee~'_'] is defined %}
                                                            <td>{{ sommeProduitM[annee~'_']|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>-</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                                <tr class="text_color">
                                                    <td>Effet prix</td>
                                                    {% for exercice in bp.exercices %}
                                                        {% set annee = exercice.dateDebut|date('mY') %}
                                                        {% if sommeProduitP[annee~'_'] is defined %}
                                                            <td>{{ sommeProduitP[annee~'_']|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>-</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                                <tr class="color">
                                                    <td>Variation du chiffre d'affaires</td>
                                                    {% for exercice in bp.exercices %}
                                                        {% set annee = exercice.dateDebut|date('mY') %}
                                                        {% if sommeEffetParAnnee[annee~'_'] is defined %}
                                                            <td>{{ sommeEffetParAnnee[annee~'_']|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>-</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            </tbody>
                                        </table>
                                    {% endif %}
                                {% endif %}
                            </div>

                            {% if loop.first %}
                                <div class="col s5 info">
                                    <div class="row z-depth-1">
                                        <div class="col s12 color">
                                            <h5 class="padding_block"><i class="material-icons left">info</i>Chiffre d'affaires</h5>
                                        </div>
                                        <div class="col s12 ">
                                            <p class="padding_block">Le chiffre d'affaires (ou CA) est le total des ventes de biens et/ou de services
                                                d'une entreprise sur un exercice comptable.
                                                Il permet, en partie, d'évaluer la taille de entreprise (en fonction de l'importance
                                                du CA) et le contexte dans lequel elle se situe (tendance hausière, baissière ou
                                                stable).
                                                Le niveau de chiffre d'affires dépend également de la nature de l'activité (vente
                                                de services ou vente de marchandises). </p>
                                            <p class="padding_block"><b>Décomposition de l'évolution du CA</b></p>
                                            <p class="padding_block">En analyse financière, cette analyse de l'évolution du CA peut être décomposée
                                                entre 3 effets :
                                                - l’effet volume : correspondant à l'impact des variations de quantités vendues
                                                sur le chiffre d'affaires (entendu à mix et prix constants),
                                                - l’effet mix : correspondant à l'impact de l'évolution des contributions de
                                                chaque produit dans le chiffre d'affaires (entendu à prix constants),
                                                - l'effet prix : correspondant à l'impact de la variation du prix de vente moyen
                                                sur le chiffre d'affaires.</p>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                        <!-- BODY -->
                    </div>
                    <!-- FOOTER -->
                    <div class="card-action color">
                        {% set page = page + 1 %}
                        <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                    </div>
                    <!-- FOOTER -->
                </div>
            {% endfor %}

            <!-- ============================================================= -->
            <!-- Taux de marge  ================================ -->
            <!-- ============================================================= -->
            {% set annee = [] %}
            {% for key in bp.getInfoAnnuel|keys %}
                {% set annee = annee|merge([infoAnnuel[key].date]) %}
            {% endfor %}
            {% set totalMargeBrute = [] %}
            {% if bp.produits is not empty %}
                {% for batch_produits in bp.produits|batch(12) %}
                    <div class="card">
                        <div class="card-content">
                            <!-- HEADRE -->
                            <div class="row">
                                <div class="col s4">
                                    <h3>Marge brute {% if loop.length>1 %}{{loop.index}}/{{loop.length}}{% endif %}</h3><hr>
                                </div>
                            </div>
                            <!-- /HEADER -->
                            <!-- BODY -->
                            <div class="row">

                                <div class="col {% if loop.first %}s6{%else%}s12{%endif%}">
                                    <h5 class="flow-text">{{ nameCorporate }} - Détail de la marge brute</h5>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>

                                                {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>

                                            {% for produit in batch_produits %}
                                                <tr>
                                                    <td>{{ produit.name }}</td>
                                                    {% for key, infoProduit in produit.infoProduct %}
                                                        {% set value = infoProduit.CAExercice - infoProduit.coutExercice %}
                                                        <td>{{ value|formatNumber(null,null,(trialMode and not loop.first)) }}</td>

                                                        {% if totalMargeBrute[key~"_"] is defined %}
                                                            {% set valueTmp =  totalMargeBrute[key~"_"] + value %}
                                                            {% set totalMargeBrute = totalMargeBrute|merge({ (key~"_") : valueTmp }) %}
                                                        {% else %}
                                                            {% set totalMargeBrute = totalMargeBrute|merge({ (key~"_") : value }) %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total global{% endif %} marge brute</td>
                                                {% for key, annee in bp.getInfoAnnuel|keys %}
                                                    <td>{{ totalMargeBrute[key~"_"]|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h5 class="flow-text">{{ nameCorporate }} - Taux de marge brute</h5>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>
                                            {% for produit in batch_produits %}
                                                <tr>
                                                    <td>{{ produit.name }}</td>
                                                    {% for key, infoProduit in produit.infoProduct %}
                                                        {% if infoProduit.CAExercice != 0 %}
                                                            {% set value = ((infoProduit.CAExercice - infoProduit.coutExercice) / infoProduit.CAExercice) * 100 %}
                                                            <td>{{ value|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>&infin;</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total global{% endif %} taux marge brute</td>
                                                {% for key in bp.getInfoAnnuel|keys %}
                                                    {% if infoAnnuel[key].ca != 0 %}
                                                        <td>{{ ((totalMargeBrute[loop.index0~"_"] / infoAnnuel[key].ca)*100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                                    {% else %}
                                                        <td>&infin;</td>
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                {% if loop.first %}
                                    <div class="col s6 info">
                                        <div class="row z-depth-1">
                                            <div class="col s12 color">
                                                <h5 class="padding_block"><i class="material-icons left">info</i>Marge brute</h5>
                                            </div>
                                            <div class="col s12 ">
                                                <p class="padding_block">La marge brute est une notion économique et comptable désignant la
                                                    rentabilité dégagée lors de la vente d'une marchandise, c'est à dire à la
                                                    différence entre le prix de vente et les coûts de revient directs (achats de
                                                    matière première et de sous-traitance de production).
                                                    Le taux de marge brute est l'indicateur de mesure de la marge brute
                                                    correspondant à un pourcentage du chiffre d'affaires. </p>
                                                <p class="padding_block center"><b>Répartition de la marge brute par produit</b></p>
                                                {% if trialMode %}
                                                    <div id="mbm" class='center-align' style="padding: 190px; min-width: 310px; max-width: 800px; height: 400px; border: solid 1px">Graphique indisponible pendant la période d'essai</div>
                                                {% else %}
                                                    <div id="mbm" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto" data-chart="{{ chartMargeJson|json_encode() }}" data-categories="{{ annee|json_encode() }}"></div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            <!-- BODY -->
                        </div>
                        <!-- FOOTER -->
                        <div class="card-action color">
                            {% set page = page + 1 %}
                            <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                        </div>
                        <!-- FOOTER -->
                    </div>
                {% endfor %}
            {% endif %}
            <!-- ============================================================= -->
            <!-- Charges variables            ================================ -->
            <!-- ============================================================= -->

            {% if  chargesVariables is not empty%}
                {% set arraySommeCharge = [] %}
                {% for batch_charges in chargesVariables|batch(13) %}
                    <div class="card">
                        <div class="card-content">
                            <!-- HEADRE -->
                            <div class="row">
                                <div class="col s4">
                                    <h3>Charges variables {% if loop.length>1 %}{{loop.index}}/{{loop.length}}{% endif %}</h3><hr>
                                </div>
                            </div>
                            <!-- /HEADER -->
                            <!-- BODY -->
                            <div class="row">

                                <div class="col s6">
                                    <h5 class="flow-text">{{ nameCorporate }} - Détail des charges variables</h5>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>
                                            {% if loop.first %}
                                                <tr>
                                                    <td>Commissions</td>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                        {% set value = infoAnnuel[key].commission * -1 %}
                                                        {% set arraySommeCharge = arraySommeCharge|merge({ (loop.index0~'_') : value}) %}
                                                        <td>{{ (value)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                    {% endfor %}
                                                </tr>
                                            {% endif %}
                                            {% for key, charge in batch_charges %}
                                                {% if charge.taux is not null %}
                                                    <tr>
                                                        <td>
                                                            {% if charge.otherChoice %}
                                                                {{ charge.otherChoice }}
                                                            {% else %}
                                                                {{ charge.chargeLabel.translate.name }}
                                                            {% endif %}
                                                        </td>
                                                        {% for key in bp.getInfoAnnuel|keys %}
                                                            {% set value = (charge.taux * infoAnnuel[key].ca) / 100 %}
                                                            <td>{{ value|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                            {% if arraySommeCharge[loop.index0~'_'] is defined %}
                                                                {% set valueTmp = arraySommeCharge[loop.index0~'_'] + value %}
                                                                {% set arraySommeCharge = arraySommeCharge|merge({ (loop.index0~'_'): valueTmp}) %}
                                                            {% else %}
                                                                {% set arraySommeCharge = arraySommeCharge|merge({ (loop.index0~'_') : value}) %}
                                                            {% endif %}
                                                        {% endfor %}
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total{% endif %}</td>
                                                {% for sommeCharge in arraySommeCharge %}
                                                    <td>{{ sommeCharge|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h5 class="flow-text">{{ nameCorporate }} - Taux des charges variables</h5>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>
                                            {% if loop.first %}
                                                <tr>
                                                    <td>Commissions</td>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                        {% if infoAnnuel[key].ca != 0 %}
                                                            <td>{{ (((infoAnnuel[key].commission * -1) / infoAnnuel[key].ca) * 100)|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                                        {% else %}
                                                            <td>-</td>
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endif %}
                                            {% for key, charge in batch_charges %}
                                                {% if charge.taux is not null %}
                                                    <tr>
                                                        <td>
                                                            {% if charge.otherChoice %}
                                                                {{ charge.otherChoice }}
                                                            {% else %}
                                                                {{ charge.chargeLabel.translate.name }}
                                                            {% endif %}
                                                        </td>
                                                        {% for key in bp.getInfoAnnuel|keys %}
                                                            <td>{{ charge.taux|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                                        {% endfor %}
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total{% endif %}</td>
                                                {% for key in bp.getInfoAnnuel|keys %}
                                                    {% if infoAnnuel[key].ca != 0 %}
                                                        <td>{{ ((arraySommeCharge[loop.index0~"_"] / infoAnnuel[key].ca)*100)|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                                    {% else %}
                                                        <td>-</td>
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="col s6 info">
                                    <div class="row z-depth-1">
                                        <div class="col s12 color">
                                            <h5 class="padding_block"><i class="material-icons left">info</i>Charges variables</h5>
                                        </div>
                                        <div class="col s12 ">
                                            <p class="padding_block">Les charges externes regroupent l’ensemble des dépenses de structure de
                                                l'entreprise, nécessaire au maintien de l'activité (par exemple : loyers,
                                                dépenses en télécom, en électricité, frais de déplacements, assurances,
                                                honoraires d'expert-comptable, frais de publicité, etc...). </p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- BODY -->
                        </div>
                        <!-- FOOTER -->
                        <div class="card-action color">
                            {% set page = page + 1 %}
                            <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                        </div>
                        <!-- FOOTER -->
                    </div>
                {% endfor %}
            {% endif %}

            <!-- ============================================================= -->
            <!-- Charges externes ============================================ -->
            <!-- ============================================================= -->
            {% if  chargesExternes is not empty%}
                {% set arraySommeCharge = [] %}
                {% for batch_charges in chargesExternes|batch(35) %}
                    <div class="card">
                        <div class="card-content">
                            <!-- HEADRE -->
                            <div class="row">
                                <div class="col s4">
                                    <h3>Charges externes {% if loop.length>1 %}{{loop.index}}/{{loop.length}}{% endif %} </h3><hr>
                                </div>
                            </div>
                            <!-- /HEADER -->
                            <!-- BODY -->
                            <div class="row">

                                <div class="col s6">
                                    <h5 class="flow-text">{{ nameCorporate }} - Détail des charges externes</h5>
                                    <table>
                                        <thead class="color">
                                            <tr>
                                                <th width="30%">Nature €</th>
                                                    {% for key in bp.getInfoAnnuel|keys %}
                                                    <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                    {% endfor %}
                                            </tr>
                                        </thead>

                                        <tbody>

                                            {% for key, charge in batch_charges %}
                                                {% if charge.taux is null %}
                                                    <tr>
                                                        <td>
                                                            {% if charge.otherChoice %}
                                                                {{ charge.otherChoice }}
                                                            {% else %}
                                                                {{ charge.chargeLabel.translate.name }}
                                                            {% endif %}
                                                        </td>
                                                        {% for key, infoCharge in charge.infoCharges %}
                                                            <td>{{ infoCharge.cout|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                            {% if arraySommeCharge[loop.index0~'_'] is defined %}
                                                                {% set value = arraySommeCharge[loop.index0~'_'] + infoCharge.cout %}
                                                                {% set arraySommeCharge = arraySommeCharge|merge({ (loop.index0~'_'): value}) %}
                                                            {% else %}
                                                                {% set arraySommeCharge = arraySommeCharge|merge({ (loop.index0~'_') : infoCharge.cout}) %}
                                                            {% endif %}
                                                        {% endfor %}
                                                    </tr>
                                                {% endif %}
                                            {% endfor %}
                                            <tr class="color">
                                                <td>{% if loop.last %}Total{% else %}Sous-Total{% endif %}</td>
                                                {% for sommeCharge in arraySommeCharge %}
                                                    <td>{{ sommeCharge|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                {% endfor %}
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="col s6 info">
                                    <div class="row z-depth-1">
                                        <div class="col s12 color">
                                            <h5 class="padding_block"><i class="material-icons left">info</i>Charges externes</h5>
                                        </div>
                                        <div class="col s12 ">
                                            <p class="padding_block">Les charges externes regroupent l’ensemble des dépenses de structure de
                                                l'entreprise, nécessaire au maintien de l'activité (par exemple : loyers,
                                                dépenses en télécom, en électricité, frais de déplacements, assurances,
                                                honoraires d'expert-comptable, frais de publicité, etc...). </p>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!-- BODY -->
                        </div>
                        <!-- FOOTER -->
                        <div class="card-action color">
                            {% set page = page + 1 %}
                            <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                        </div>
                        <!-- FOOTER -->
                    </div>
                {% endfor %}
            {% endif %}

            <!-- ============================================================= -->
            <!-- Charges de personnel ======================================== -->
            <!-- ============================================================= -->
            {% if chargesDeDePersonnel != null %}
                <div class="card">
                    <div class="card-content">
                        <!-- HEADRE -->
                        <div class="row">
                            <div class="col s4">
                                <h3>Charges de personnel</h3><hr>
                            </div>
                        </div>
                        <!-- /HEADER -->
                        <!-- BODY -->
                        <div class="row">

                            <div class="col s6">
                                <h5 class="flow-text">{{ nameCorporate }} - Détail de la masse salariale</h5>
                                <table>
                                    <thead class="color">
                                        <tr>
                                            <th width="30%">Nature €</th>
                                                {% for key in bp.getInfoAnnuel|keys %}
                                                <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                {% endfor %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% set sommePersonnel = [] %}
                                        {% if chargesDeDePersonnel != null %}
                                            {% for k, status in chargesDeDePersonnel.status %}
                                                <tr>
                                                    <td>{{ k }}</td>
                                                    {% for key, value in status %}
                                                        <td>
                                                            {{ value.somme|formatNumber(null,null,(trialMode and not loop.first)) }}
                                                        </td>
                                                        {% if sommePersonnel[key~'_'] is defined %}
                                                            {% set resultat = sommePersonnel[key~'_'] + value.somme %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): resultat }) %}
                                                        {% else %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): value.somme }) %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                        {% endif %}
                                        <tr class="color">
                                            <td>Total par status</td>
                                            {% for somme in sommePersonnel %}
                                                <td>{{ somme|formatNumber(null,null,(trialMode and not loop.first)) }}</td>

                                            {% endfor %}
                                        </tr>

                                        {% set sommePersonnel = [] %}
                                        {% if chargesDeDePersonnel != null %}
                                            {% for k, status in chargesDeDePersonnel.pole %}
                                                <tr>
                                                    <td>{{ k }}</td>
                                                    {% for key, value in status %}
                                                        <td>
                                                            {{ value.somme|formatNumber(null,null,(trialMode and not loop.first)) }}
                                                        </td>
                                                        {% if sommePersonnel[key~'_'] is defined %}
                                                            {% set resultat = sommePersonnel[key~'_'] + value.somme %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): resultat }) %}
                                                        {% else %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): value.somme }) %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                        {% endif %}
                                        <tr class="color">
                                            <td>Total par pole</td>
                                            {% for somme in sommePersonnel %}
                                                <td>{{ somme|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>
                                <h5 class="flow-text">{{ nameCorporate }} - Détail de l'effectif</h5>
                                <table>
                                    <thead class="color">
                                        <tr>
                                            <th width="30%">Nature €</th>
                                                {% for key in bp.getInfoAnnuel|keys %}
                                                <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                {% endfor %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% set sommePersonnel = [] %}
                                        {% if chargesDeDePersonnel != null %}
                                            {% for k, status in chargesDeDePersonnel.status %}
                                                <tr>
                                                    <td>Effectif {{ k }}</td>
                                                    {% for key, value in status %}
                                                        <td>
                                                            {{ value.effectif|formatNumber('',1,(trialMode and not loop.first)) }}
                                                        </td>
                                                        {% if sommePersonnel[key~'_'] is defined %}
                                                            {% set resultat = sommePersonnel[key~'_'] + value.effectif %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): resultat }) %}
                                                        {% else %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): value.effectif }) %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                        {% endif %}
                                        <tr class="color">
                                            <td>Total par status</td>
                                            {% for somme in sommePersonnel %}
                                                <td>{{ somme|formatNumber('',1,(trialMode and not loop.first)) }}</td>
                                            {% endfor %}
                                        </tr>
                                        {% set sommePersonnel = [] %}
                                        {% if chargesDeDePersonnel != null %}
                                            {% for k, status in chargesDeDePersonnel.pole %}
                                                <tr>
                                                    <td>Effectif {{ k }}</td>
                                                    {% for key, value in status %}
                                                        <td>
                                                            {{ value.effectif|formatNumber('',1,(trialMode and not loop.first)) }}
                                                        </td>
                                                        {% if sommePersonnel[key~'_'] is defined %}
                                                            {% set resultat = sommePersonnel[key~'_'] + value.effectif %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): resultat }) %}
                                                        {% else %}
                                                            {% set sommePersonnel = sommePersonnel|merge({ (key~'_'): value.effectif }) %}
                                                        {% endif %}
                                                    {% endfor %}
                                                </tr>
                                            {% endfor %}
                                        {% endif %}
                                        <tr class="color">
                                            <td>Total par pole</td>
                                            {% for somme in sommePersonnel %}
                                                <td>{{ somme|formatNumber('',1,(trialMode and not loop.first)) }}</td>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col s6 info">
                                <div class="row z-depth-1">
                                    <div class="col s12 color">
                                        <h5 class="padding_block"><i class="material-icons left">info</i>Charges de personnel</h5>
                                    </div>
                                    <div class="col s12 ">
                                        <p class="padding_block">Les charges de personnel sont constituées de l'ensemble des salaires et des
                                            charges sociales liées à aux rémunérations des personnes ayant conclus un
                                            contrat de travail avec l'entreprise.
                                            L'analyse des charges de personnel est très importante en raison des montants
                                            concernés. Selon la nature des travaux réalisés par ces personnes, ces
                                            charges peuvent être considérées soit variables soit fixes.
                                            Les charges de personnels sont généralement revues afin d'analyser la
                                            capacité de l'entreprise à récruter et donc à faire face à sa croissance. </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- BODY -->
                    </div>
                    <!-- FOOTER -->
                    <div class="card-action color">
                        {% set page = page + 1 %}
                        <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                    </div>
                    <!-- FOOTER -->
                </div>
            {% endif %}

            <!-- ============================================================= -->
            <!-- 2 theme - Bilan et Prévisions de trésorerie ================= -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- BODY -->
                    <h1 class="center">Bilan et Prévisions<br> de trésorerie<hr></h1>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>
            <!-- ============================================================= -->
            <!-- Bilan ======================================================= -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Bilan</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">
                        <div class="col s6">
                            <h5 class="flow-text">{{ nameCorporate }} - Bilan prévisionnel sur {{ infoAnnuel|length }} ans</h5>
                            {% set infoBilanAnnuel = bp.infoBilanAnnuel %}
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th width="30%">Nature €</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>Immobilisations incorporelles</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].immoIncorporelle)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Immobilisations corporelles</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].immoCorporel)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Immobilisations financières</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].immoFinanciere)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Actif immobilisé</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].actifsImmo)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Stocks</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].stocks)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Clients</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].client)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Autres créances</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].autreCreance)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Fournisseurs</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].fournisseur)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dettes fiscales</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].detteFiscale)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dettes sociales</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].detteSociale)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Autres dettes</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].autreDette)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>BFR d'exploitation</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].bfrExploitation)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    {% set bfrExploitation = [] %}
                                    <tr>
                                        <td>IS</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].is)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                            {% if bfrExploitation[key~"_"] is defined %}
                                                {% set value = bfrExploitation[key~"_"] + infoBilanAnnuel[key].is %}
                                                {% set bfrExploitation = bfrExploitation|merge({ (key~"_"): value }) %}
                                            {% else %}
                                                {% set bfrExploitation = bfrExploitation|merge({ (key~"_"): infoBilanAnnuel[key].is }) %}
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>BFR hors exploitation</td>
                                        {% for value in bfrExploitation %}
                                            <td>{{ value|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    {% set detteFinanciereNette = [] %}
                                    <tr>
                                        <td>Emprunts bancaires</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].empruntBancaire)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                            {% if detteFinanciereNette[key~"_"] is defined %}
                                                {% set value = detteFinanciereNette[key~"_"] + infoBilanAnnuel[key].empruntBancaire %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): value }) %}
                                            {% else %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): infoBilanAnnuel[key].empruntBancaire }) %}
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Comptes courants associés</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].compteCourantAssocie)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                            {% if detteFinanciereNette[key~"_"] is defined %}
                                                {% set value = detteFinanciereNette[key~"_"] + infoBilanAnnuel[key].compteCourantAssocie %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): value }) %}
                                            {% else %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): infoBilanAnnuel[key].compteCourantAssocie }) %}
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subventions remboursables</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% set subRemboursable = infoBilanAnnuel[key].subventionRemboursable %}
                                            <td>{{ subRemboursable|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                            {% if detteFinanciereNette[key~"_"] is defined %}
                                                {% set value = detteFinanciereNette[key~"_"] + subRemboursable %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): value }) %}
                                            {% else %}
                                                {% set detteFinanciereNette = detteFinanciereNette|merge({ (key~"_"): subRemboursable }) %}
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Trésorerie</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                {% set treso = infoBilanAnnuel[key]['fluxtresorerie'].tresorerieCloture %}
                                                <td>{{ treso|formatNumber(null,null,(trialMode and not loop.first)) }}</td>

                                                {% if detteFinanciereNette[loop.index~"_"] is defined %}
                                                    {% set value = detteFinanciereNette[loop.index~"_"] + treso %}
                                                    {% set detteFinanciereNette = detteFinanciereNette|merge({ (loop.index~"_"): value }) %}
                                                {% else %}
                                                    {% set detteFinanciereNette = detteFinanciereNette|merge({ (loop.index~"_"): treso }) %}
                                                {% endif %}
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Dette financière nette</td>
                                        {% for value in detteFinanciereNette %}
                                            <td>{{ value|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Actif net</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].actifNet)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Capital social</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].capitalSocial)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Réserves</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].reserve)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat exercice</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].resultatExercice)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Capitaux propres</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>{{ (infoBilanAnnuel[key].capitauxPropres)|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s6 info">
                            <div class="row z-depth-1">
                                <div class="col s12 color">
                                    <h5 class="padding_block"><i class="material-icons left">info</i>Bilan</h5>
                                </div>
                                <div class="col s12 ">
                                    <p class="padding_block">Un bilan comptable est un document comptable synthétisant ce qui est possédé
                                        par une société (son actif) et ce qui est dû (le passif).<br>
                                        Le bilan est souvent comparé à une photographie du patrimoine d'une
                                        entreprise à une date précise (généralement la date de clôture d'un exercice
                                        comptable). Il permet d'analyser la solvabilité de l'entreprise et de mettre en
                                        exergue les éléments ayant impacté le niveau de trésorerie. </p>
                                    <p class="padding_block center"><b>Evolution du Besoin en fonds de roulement</b></p>
                                    {% if trialMode %}
                                        <div id="bilan" class='center-align' style="padding: 190px; min-width: 310px; max-width: 800px; height: 400px; border: solid 1px">Graphique indisponible pendant la période d'essai</div>
                                    {% else %}
                                        <div id="bilan" style="min-width: 310px; max-width: 600px; height: 400px; margin: 0 auto" data-chart="{{ chartBilanJson|json_encode }}" data-categories="{{ annee|json_encode() }}"></div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Investissements ============================================= -->
            <!-- ============================================================= -->
            {% if  bp.investissements is not empty%}
                <div class="card">
                    <div class="card-content">
                        <!-- HEADRE -->
                        <div class="row">
                            <div class="col s4">
                                <h3>Investissements</h3><hr>
                            </div>
                        </div>
                        <!-- /HEADER -->
                        <!-- BODY -->
                        <div class="row">

                            <div class="col s6">
                                <h5 class="flow-text">{{ nameCorporate }} - Bilan prévisionnel sur {{ infoAnnuel|length }} ans</h5>
                                <table>
                                    <thead class="color">
                                        <tr>
                                            <th width="15%">Nature €</th>
                                            <th width="15%">Brut</th>
                                            <th width="15%">Durée Amt</th>
                                                {% for key in bp.infoBilanAnnuel|keys %}
                                                <th width="15%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                                {% endfor %}
                                        </tr>
                                    </thead>

                                    <tbody>
                                        {% set tableauInvestissement = [] %}
                                        {% for key, investissement in bp.investissements %}
                                            <tr>
                                                <td>{{ investissement.chargeLabel.translate.name }}</td>
                                                <td>{{ investissement.amount }}</td>
                                                {% if tableauInvestissement["brut"] is defined %}
                                                    {% set value = tableauInvestissement["brut"] + investissement.amount %}
                                                    {% set tableauInvestissement = tableauInvestissement|merge({ brut: value }) %}
                                                {% else %}
                                                    {% set tableauInvestissement = tableauInvestissement|merge({ brut: investissement.amount }) %}
                                                {% endif %}
                                                <td>{{ calculDureeAmortissement(investissement, codeCountry) }} mois</td>
                                                {% for exercice in bp.exercices %}
                                                    {% set annee = exercice.dateDebut|date('mY') %}
                                                    {% if investissement.detailImmoNet[annee] is defined %}
                                                        <td>{{ investissement.detailImmoNet[annee]|formatNumber(null,null,(trialMode and not loop.first)) }}</td>
                                                        {% if tableauInvestissement[annee~"_"] is defined %}
                                                            {% set value = tableauInvestissement[annee~"_"] + investissement.detailImmoNet[annee] %}
                                                            {% set tableauInvestissement = tableauInvestissement|merge({ (annee~"_"): value }) %}
                                                        {% else %}
                                                            {% set tableauInvestissement = tableauInvestissement|merge({ (annee~"_"): investissement.detailImmoNet[annee] }) %}
                                                        {% endif %}
                                                    {% else %}
                                                        <td>-</td>
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                        {% endfor %}
                                        {% set tauxObsolescence = [] %}
                                        <tr class="color">
                                            <td>Total Valeur Brute</td>
                                            <td>
                                                {% if tableauInvestissement["brut"] is defined %}
                                                    {{ tableauInvestissement["brut"] }}
                                                {% endif %}
                                            </td>
                                            <td></td>
                                            {% for exercice in bp.exercices %}
                                                {% set annee = exercice.dateDebut|date('mY') %}
                                                <td>
                                                    {% if tableauInvestissement[annee~"_"] is defined %}
                                                        {{ tableauInvestissement[annee~"_"]|formatNumber(null,null,(trialMode and not loop.first)) }}
                                                    {% else %}
                                                        -
                                                    {% endif %}

                                                    {% if tableauInvestissement["brut"] is defined and tableauInvestissement[annee~"_"] is defined %}
                                                        {% set value = (1 - (tableauInvestissement[annee~"_"] / tableauInvestissement["brut"])) * 100 %}
                                                        {% set tauxObsolescence = tauxObsolescence|merge({ (annee~"_"): value }) %}
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="text_color">
                                            <td>Taux d'obsolescence moyen</td>
                                            <td></td>
                                            <td></td>
                                            {% for exercice in bp.exercices %}
                                                {% set annee = exercice.dateDebut|date('mY') %}
                                                <td>
                                                    {% if tauxObsolescence[annee~"_"] is defined %}
                                                        {{ tauxObsolescence[annee~"_"]|formatNumber('%',1,(trialMode and not loop.first)) }}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="col s6 info">
                                <div class="row z-depth-1">
                                    <div class="col s12 color">
                                        <h5 class="padding_block"><i class="material-icons left">info</i>Investissements</h5>
                                    </div>
                                    <div class="col s12 ">
                                        <p class="padding_block">Une immobilisation est un élément identifiable du patrimoine ayant une valeur
                                            économique positive pour l’entité, qui sert l'activité de façon durable et ne se
                                            consomme pas par le premier usage. C’est un élément permettant à
                                            l’entreprise de réaliser son activité et se défini par les avantages économiques
                                            futurs qu'il octroi à l'entreprise. Ces avantages économiques futurs constituent
                                            le potentiel de l'entreprise à générer des flux de trésorerie.<br><br>
                                            La valeur nette de l’actif immobilisé correspond à la différence entre la valeur
                                            d’acquisition du bien et l’amortissement correspondant, définit comme la perte
                                            de valeur de ce bien en raison de l'usure provoquée par son utilisation, ou du
                                            fait de l'obsolescence de ce bien au regard des nouvelles techniques utilisées. </p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <!-- BODY -->
                    </div>
                    <!-- FOOTER -->
                    <div class="card-action color">
                        {% set page = page + 1 %}
                        <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                    </div>
                    <!-- FOOTER -->
                </div>
            {% endif %}

            <!-- ============================================================= -->
            <!-- Emprunts bancaires ========================================== -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Dettes financières</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">

                        <div class="col s6">
                            <h5 class="flow-text">{{ nameCorporate }} - Evolution des dettes bancaires</h5>
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th width="20%">Nature €</th>
                                        <th width="10%">Initial</th>
                                        <th width="10%">Durée</th>
                                        <th width="10%">Taux</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th width="10%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    {% set totalEmpruntBancaire = [] %}
                                    {% set tauxObsolescence = [] %}
                                    {% for funding in bp.fundings if funding.detailEmpruntBancaire is not empty %}
                                        <tr>
                                            <td>{{ funding.chargeLabel.translate.name }} n°{{ loop.index }}</td>
                                            <td>{{ funding.amount|formatNumber(null,null,(trialMode and not loop.first))}} </td>
                                            {% if totalEmpruntBancaire["initial"] is defined %}
                                                {% set value = totalEmpruntBancaire["initial"] + funding.amount %}
                                                {% set totalEmpruntBancaire = totalEmpruntBancaire|merge({ initial: value }) %}
                                            {% else %}
                                                {% set totalEmpruntBancaire = totalEmpruntBancaire|merge({ initial: funding.amount }) %}
                                            {% endif %}
                                            <td>{{ funding.within }} mois</td>
                                            <td>{{ funding.rate|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                            {% for exercice in bp.exercices %}
                                                {% set annee = exercice.dateFin|date('mY') %}
                                                <td>
                                                    {% if funding.detailEmpruntBancaire[annee] is defined %}
                                                        {{ funding.detailEmpruntBancaire[annee]|formatNumber(null,null,(trialMode and not loop.first))}}

                                                        {% if totalEmpruntBancaire[annee~"_"] is defined %}
                                                            {% set value = totalEmpruntBancaire[annee~"_"] + funding.detailEmpruntBancaire[annee] %}
                                                            {% set totalEmpruntBancaire = totalEmpruntBancaire|merge({ (annee~"_"): value }) %}
                                                        {% else %}
                                                            {% set totalEmpruntBancaire = totalEmpruntBancaire|merge({ (annee~"_"): funding.detailEmpruntBancaire[annee] }) %}
                                                        {% endif %}

                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                    <tr class="color">
                                        <td>Total des emprunts souscrits</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        {% for exercice in bp.exercices %}
                                            <td>
                                                {% set annee = exercice.dateFin|date('mY') %}
                                                {% if totalEmpruntBancaire[annee~"_"] is defined %}
                                                    {{ totalEmpruntBancaire[annee~"_"]|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% else %}
                                                    -
                                                {% endif %}

                                                {% if totalEmpruntBancaire["initial"] is defined and totalEmpruntBancaire[annee~"_"] is defined %}
                                                    {% set value = (1 - (totalEmpruntBancaire[annee~"_"] / totalEmpruntBancaire["initial"])) * 100 %}
                                                    {% set tauxObsolescence = tauxObsolescence|merge({ (annee~"_"): value }) %}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>TR Total des emprunts souscrits</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        {% for exercice in bp.exercices %}
                                            {% set annee = exercice.dateFin|date('mY') %}
                                            <td>
                                                {% if tauxObsolescence[annee~"_"] is defined %}
                                                    {{ tauxObsolescence[annee~"_"]|formatNumber('%',0,(trialMode and not loop.first)) }}
                                                {% else %}
                                                    -
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>

                            <h5 class="flow-text">{{ nameCorporate }} - Evolution des subventions remboursables</h5>
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th width="28%">Nature €</th>
                                        <th width="12%">Initial</th>
                                        <th width="12%">Durée</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th width="12%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    {% set totalSubventionRemboursable = [] %}
                                    {% set tauxObsolescence = [] %}
                                    {% for funding in bp.fundings if funding.detailSubventionRemboursable is not empty %}
                                        Compte de résultat                            <tr>
                                            <td>{{ funding.chargeLabel.translate.name }} n°{{ loop.index }}</td>
                                            <td>{{ funding.amount|formatNumber(null,null,(trialMode and not loop.first))}} </td>
                                            {% if totalSubventionRemboursable["initial"] is defined %}
                                                {% set value = totalSubventionRemboursable["initial"] + funding.amount %}
                                                {% set totalSubventionRemboursable = totalSubventionRemboursable|merge({ initial: value }) %}
                                            {% else %}
                                                {% set totalSubventionRemboursable = totalSubventionRemboursable|merge({ initial: funding.amount }) %}
                                            {% endif %}

                                            <td>{{ funding.within }} mois</td>
                                            {% for exercice in bp.exercices %}
                                                {% set annee = exercice.dateFin|date('mY') %}
                                                <td>
                                                    {% if funding.detailSubventionRemboursable[annee] is defined %}
                                                        {{ funding.detailSubventionRemboursable[annee]|formatNumber(null,null,(trialMode and not loop.first))}}

                                                        {% if totalSubventionRemboursable[annee~"_"] is defined %}
                                                            {% set value = totalSubventionRemboursable[annee~"_"] + funding.detailSubventionRemboursable[annee] %}
                                                            {% set totalSubventionRemboursable = totalSubventionRemboursable|merge({ (annee~"_"): value }) %}
                                                        {% else %}
                                                            {% set totalSubventionRemboursable = totalSubventionRemboursable|merge({ (annee~"_"): funding.detailSubventionRemboursable[annee] }) %}
                                                        {% endif %}

                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                    {% endfor %}
                                    <tr class="color">
                                        <td>Total des emprunts souscrits</td>
                                        <td></td>
                                        <td></td>
                                        {% for exercice in bp.exercices %}
                                            <td>
                                                {% set annee = exercice.dateDebut|date('mY') %}
                                                {% if totalSubventionRemboursable[annee~"_"] is defined %}
                                                    {{ totalSubventionRemboursable[annee~"_"]|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% else %}
                                                    -
                                                {% endif %}

                                                {% if totalSubventionRemboursable["initial"] is defined and totalSubventionRemboursable[annee~"_"] is defined %}
                                                    {% set value = (1 - (totalSubventionRemboursable[annee~"_"] / totalSubventionRemboursable["initial"])) * 100 %}
                                                    {% set tauxObsolescence = tauxObsolescence|merge({ (annee~"_"): value }) %}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>TR Total des emprunts souscrits</td>
                                        <td></td>
                                        <td></td>
                                        {% for exercice in bp.exercices %}
                                            {% set annee = exercice.dateDebut|date('mY') %}
                                            <td>
                                                {% if tauxObsolescence[annee~"_"] is defined %}
                                                    {{ tauxObsolescence[annee~"_"]|formatNumber('%',0,(trialMode and not loop.first)) }}
                                                {% else %}
                                                    -
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s6 info">
                            <div class="row z-depth-1">
                                <div class="col s12 color">
                                    <h5 class="padding_block"><i class="material-icons left">info</i>Emprunts bancaires</h5>
                                </div>
                                <div class="col s12 ">
                                    <p class="padding_block">L’emprunt bancaire est une opération consistant pour une personne morale à
                                        solliciter un établissement de crédit pour la mise à disposition d'une somme
                                        d'argent pour une durée et à un taux déterminés. Cette opération est
                                        matérialisée par un contrat conclu entre l'emprunteur et le prêteur.<br><br>
                                        Ces fonds permettent de financer les besoins de trésorerie nécessaires à
                                        l'activité selon 2 vecteurs :<br>
                                        - Le financement des investissements (de capacité ou de renouvellement),
                                        - Le financement du besoin en fonds de roulement, à savoir le financement des
                                        achats de stocks et le financement des décalages de paiement entre les
                                        dépenses et les ventes.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Tableau de flux de trésorerie =============================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Tableau de flux de trésorerie</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">

                        <div class="col s6">
                            <h5 class="flow-text">{{ nameCorporate }} - Cash flow prévisionnel sur {{ infoAnnuel|length }} ans</h5>
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th width="30%">Nature €</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>EBE</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].ebe)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation de BFR</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationBfr)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>

                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux d'exploitation</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxExploitation)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat financier</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].resultatFinancier)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat exceptionnel</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>-</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subvention non remboursable</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].subventionNonRemboursable)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Décaissement IS</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].decaissement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux d'activité</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxActivite)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Investissements</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].investissement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation dettes fournisseurs d'immobilisations</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationDetteFournisseurImmo)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Free cash flow</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].freeCashFlow)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Augmentation capital</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].augmentationCapitale)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation compte courant</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationCompteCourant)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation emprunt</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationEmprunt)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subvention remboursable</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].subventionRemboursable)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dividende</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].dividende)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux de financement</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxFinancement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Flux de trésorerie</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxTresorerie)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Trésorerie ouverture</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].tresorerieOuverture)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Trésorerie clôture</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].tresorerieCloture)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s6 info">
                            <div class="row z-depth-1">
                                <div class="col s12 color">
                                    <h5 class="padding_block"><i class="material-icons left">info</i>Tableau de flux de trésorerie (TFT)</h5>
                                </div>
                                <div class="col s12 ">
                                    <p class="padding_block">Le TFT désigne l'état comptable présentant les entrées et sorties de trésorerie
                                        au cours d'un exercice comptable.<br>
                                        Il vise principalement à expliquer la variation de trésorerie d'une entreprise à
                                        partir des indicateurs clés d'activité (EBE, BFR, investissements,
                                        financements...), lesquels reflètent les incidences des variations des postes du
                                        bilan et la performance économique de l'entreprise.<br>
                                        Il permet ainsi, à travers plusieurs étapes de calcul de mettre en évidence les
                                        zones de dégagement et de consommation de trésorerie, ainsi que leur
                                        importance dans le flux de trésorerie global.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Tableau de flux de trésorerie =============================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s6">
                            <h3>Tableau de flux de trésorerie (Encaissement)</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">

                        <div class="col s6">
                            <h5 class="flow-text">{{ nameCorporate }} - Cash flow prévisionnel sur {{ infoAnnuel|length }} ans</h5>
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th width="30%">Nature €</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th width="14%">{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>Chiffre d'affaire encaissé</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].ca)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Charges décaissées (Directes + Variables + Charges externes)</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].achatsHorsStock)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>

                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Achats de Stock</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].achatStock)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Personnel et charges sociales décaissées</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].personnel)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Impôts et taxes + TVA</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].impotsEtTaxes)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux d'exploitation</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxExploitation)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat financier</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].resultatFinancier)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat exceptionnel</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>-</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subvention non remboursable</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].subventionNonRemboursable)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Décaissement IS</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].decaissement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux d'activité</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxActivite)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Investissements</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].investissement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation dettes fournisseurs d'immobilisations</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationDetteFournisseurImmo)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Free cash flow</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].freeCashFlow)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Augmentation capital</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].augmentationCapitale)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation compte courant</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationCompteCourant)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Variation emprunt</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].variationEmprunt)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Subvention remboursable</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].subventionRemboursable)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dividende</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].dividende)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold top_bar">
                                        <td>Flux de financement</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxFinancement)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="color">
                                        <td>Flux de trésorerie</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].fluxTresorerie)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Trésorerie ouverture</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].tresorerieOuverture)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="text_color">
                                        <td>Trésorerie clôture</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            <td>
                                                {% if infoBilanAnnuel[key]['fluxtresorerie'] is defined %}
                                                    {{ (infoBilanAnnuel[key]['fluxtresorerie'].tresorerieCloture)|formatNumber(null,null,(trialMode and not loop.first))}}
                                                {% endif %}
                                            </td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="col s6 info">
                            <div class="row z-depth-1">
                                <div class="col s12 color">
                                    <h5 class="padding_block"><i class="material-icons left">info</i>Tableau de flux de trésorerie (TFT)</h5>
                                </div>
                                <div class="col s12 ">
                                    <p class="padding_block">Le TFT désigne l'état comptable présentant les entrées et sorties de trésorerie
                                        au cours d'un exercice comptable.<br>
                                        Il vise principalement à expliquer la variation de trésorerie d'une entreprise à
                                        partir des indicateurs clés d'activité (EBE, BFR, investissements,
                                        financements...), lesquels reflètent les incidences des variations des postes du
                                        bilan et la performance économique de l'entreprise.<br>
                                        Il permet ainsi, à travers plusieurs étapes de calcul de mettre en évidence les
                                        zones de dégagement et de consommation de trésorerie, ainsi que leur
                                        importance dans le flux de trésorerie global.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- 3 theme - Indicateurs clés d’activité ======================= -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- BODY -->
                    <h1 class="center">Indicateurs<br>clés<br>d’activité<hr></h1>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Indicateurs clés d'activité ================================= -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Indicateurs clés d'activité</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">

                        <div class="col s12">
                            <h5 class="flow-text">{{ nameCorporate }} - Indicateurs clés d'activité sur {{ infoAnnuel|length }} ans</h5>
                            <table>
                                <thead class="color">
                                    <tr>
                                        <th>Nature €</th>
                                            {% for key in bp.infoBilanAnnuel|keys %}
                                            <th>{{ infoAnnuel[key].date }}<br>{{ infoAnnuel[key].nbMonth }} mois</th>
                                            <th>%CA</th>
                                            {% endfor %}
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>Chiffre d'affaires (CA)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].ca|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            <td>-</td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Marge Brute (MB)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].margeBrute|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].margeBrute / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Marge Sur Coûts Variables (MSCV)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].margeSurCoutVariable|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].margeSurCoutVariable / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Valeur Ajoutée (VA)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].valeurAjoutee|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].valeurAjoutee / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Excédent Brut d'Exploitation (EBE)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].ebe|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].ebe / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat d'exploitation (Rex)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].resultatExploitation|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].resultatExploitation / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat Courant Avant Impôt (RCAI)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].rcai|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].rcai / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Résultat Net (RN)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ infoAnnuel[key].resultatNet|formatNumber(null,null,(trialMode and not loop.first))}}</td>
                                            {% if infoAnnuel[key].ca != 0 %}
                                                <td>{{ ((infoAnnuel[key].resultatNet / infoAnnuel[key].ca) * 100)|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold_sp">
                                        <td colspan="{{1 + (infoAnnuel|length * 2)}}">Ratio d'activité (par la méthode de l'apurement)</td>
                                    </tr>
                                    <tr>
                                        <td>Stock : nombre de jours d'achats correspondants</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ bfrBp.stock|formatNumber('j',0) }}</td>
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Clients : nombre de jours de chiffre d'affaires correspondants</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ bfrBp.customer|formatNumber('j',0) }}</td>
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Avance reçue des clients (%)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ bfrBp.acpteCustomer|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Fournisseurs : nombre de jours d'achats correspondants</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ bfrBp.provider|formatNumber('j',0) }}</td>
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Avance versée aux fournisseurs (%)</td>
                                        {% for key in bp.getInfoAnnuel|keys %}
                                            <td>{{ bfrBp.acpteProvider|formatNumber('%',0,(trialMode and not loop.first)) }}</td>
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold_sp">
                                        <td colspan="{{1 + (infoAnnuel|length * 2)}}">Ratio de solvabilité</td>
                                    </tr>
                                    <tr>
                                        <td>Capitaux Propres / Total Bilan</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].capitauxPropres / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dette Nette / EBE</td>
                                        {% for value in detteFinanciereNette %}
                                            {% if infoAnnuel[loop.index].ebe != 0 %}
                                                <td>{{ (value / infoAnnuel[loop.index].ebe)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dette Nette / Capitaux Propres</td>
                                        {% for value in detteFinanciereNette %}
                                            {% if infoBilanAnnuel[loop.index].capitauxPropres != 0 %}
                                                <td>{{ (value / infoBilanAnnuel[loop.index].capitauxPropres)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Total Passif / Capitaux Propres</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].capitauxPropres != 0 %}
                                                <td>{{ (infoBilanAnnuel[key].totalBilan / infoBilanAnnuel[key].capitauxPropres)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Actif circulant / Passif circulant</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].passifCirculant != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].actifCirculant / infoBilanAnnuel[key].passifCirculant)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>EBE / Annuité d'emprunts</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].annuite is defined and infoBilanAnnuel[key].annuite != 0 %}
                                                <td>{{ ( infoAnnuel[key].ebe / infoBilanAnnuel[key].annuite)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold_sp">
                                        <td colspan="{{1 + (infoAnnuel|length * 2)}}">Ratio de structure</td>
                                    </tr>
                                    <tr>
                                        <td>Immobilisations incorporelles / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].immoIncorporelle / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Immobilisations corporelles / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].immoCorporel / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Trésorerie / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].tresorerie / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Stocks / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].stocks / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Clients / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].client / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Fournisseurs / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].fournisseur / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dettes fiscales / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].detteFiscale / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Dettes sociales / Total Actif</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if infoBilanAnnuel[key].totalBilan != 0 %}
                                                <td>{{ ( infoBilanAnnuel[key].detteSociale / infoBilanAnnuel[key].totalBilan)|formatNumber(null,1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>&infin;</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr class="bold_sp">
                                        <td colspan="{{1 + (infoAnnuel|length * 2)}}">Hypothèse de construction</td>
                                    </tr>
                                    <tr>
                                        <td>Impôts et taxes sur chiffre d'affaire</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if tauxChargesFiscales[0] is defined %}
                                                <td>{{ tauxChargesFiscales[0].value|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>N.D.</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                    <tr>
                                        <td>Impôts et taxes assis sur les salaires</td>
                                        {% for key in bp.infoBilanAnnuel|keys %}
                                            {% if tauxChargesFiscales[1] is defined %}
                                                <td>{{ tauxChargesFiscales[1].value|formatNumber('%',1,(trialMode and not loop.first)) }}</td>
                                            {% else %}
                                                <td>N.D.</td>
                                            {% endif %}
                                            <td></td>
                                        {% endfor %}
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                    <!-- BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- 4 theme - Etats fnanciers mensuels ========================== -->
            <!-- ============================================================= -->
            <div class="card">
                <div class="card-content">
                    <!-- BODY -->
                    <h1 class="center">Etats financiers<br> mensuels<hr></h1>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Mensuel - Année 2015 ======================================== -->
            <!-- ============================================================= -->

            {% for key, exercice in bp.exercices %}
                {% set firstYear = loop.first %}
                <div class="card">
                    <div class="card-content">
                        <!-- HEADRE -->
                        <div class="row">
                            <div class="col s4">
                                <h3>Mensuel - Année {{ exercice.dateFin|date('Y') }}</h3><hr>
                            </div>
                        </div>
                        <!-- /HEADER -->
                        <!-- BODY -->
                        <div class="row pull_top">

                            <div class="col s12">
                                <table>
                                    <thead class="color">
                                        <tr>
                                            <th colspan="13" class="bold white black-text">P&L</th>
                                        </tr>
                                        <tr>
                                            <th>Nature €</th>
                                                {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <th>{{ infoMensuel.date|date('Y/m') }}</th>
                                                {% endfor %}
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <td>Chiffre d'affaires</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <th>{{ infoMensuel.caMensuel|formatNumber(null,null,(trialMode and not firstYear))}}</th>
                                                {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Achats de marchandises</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <th>{{ infoMensuel.coutDeRevientMensuel|formatNumber(null,null,(trialMode and not firstYear))}}</th>
                                                {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Marge brute</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <th>{{ infoMensuel.margeBruteMensuelle|formatNumber(null,null,(trialMode and not firstYear))}}</th>
                                                {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Achats variables</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ infoMensuel.achatVariableMensuel|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Marge sur coûts variables</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ infoMensuel.margeSurCoutVariableMensuelle|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Charges externes</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ infoMensuel.chargeFixeSurChargeMensuelle|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Impôts et taxes</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ infoMensuel.impotEtTaxeMensuel|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Personnel</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ (infoMensuel.chargePersonnelMensuelle + infoMensuel.ciceMensuel)|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Charges patronales</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ (infoMensuel.chargePatronaleMensuelle)|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Charges sociales d'exploitation</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ (infoMensuel.chargeSocialeExploitationMensuelle)|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold top_bar">
                                            <td>EBE</td>
                                            {% for infoMensuel in bp.infoMensuel if infoMensuel.numExercice == (key+1) %}
                                                <td>{{ infoMensuel.ebe|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold_sp">
                                            <td colspan="25">BFR</td>
                                        </tr>
                                        <tr>
                                            <td>Stocks</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.bfr.stock %}
                                                        {{ infoBilanMensuel.bfr.stock.sommeValeur|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Clients</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.bfr.client %}
                                                        {{ infoBilanMensuel.bfr.client.sommeValeur|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Autres créances</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% set autreCreance = 0 %}
                                                    {% if infoBilanMensuel.bfr.autreCreance %}
                                                        {% set autreCreance = autreCreance + infoBilanMensuel.bfr.autreCreance.sommeValeur %}
                                                    {% endif%}

                                                    {% if infoBilanMensuel.bfr.autreCreanceChargesExternes %}
                                                        {% set autreCreance = autreCreance + infoBilanMensuel.bfr.autreCreanceChargesExternes.sommeValeur %}
                                                    {% endif%}
                                                    {% if autreCreance != 0 %}
                                                        {{ autreCreance|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Fournisseurs</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% set fournisseur = 0 %}
                                                    {% if infoBilanMensuel.bfr.fournisseur %}
                                                        {% set fournisseur = fournisseur + infoBilanMensuel.bfr.fournisseur.sommeValeur %}
                                                    {% endif%}

                                                    {% if infoBilanMensuel.bfr.fournisseurChargesExternes %}
                                                        {% set fournisseur = fournisseur + infoBilanMensuel.bfr.fournisseurChargesExternes.sommeValeur %}
                                                    {% endif%}
                                                    {% if fournisseur != 0 %}
                                                        {{ fournisseur|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Dettes fiscales et sociales</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                {% set value = infoBilanMensuel.bfr.detteFiscale %}
                                                {% if infoBilanMensuel.bfr.detteSociale %}
                                                    {% set value = value + infoBilanMensuel.bfr.detteSociale.sommevaleur %}
                                                {% endif %}
                                                <td>{{ value|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Autres dettes</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                {% if infoBilanMensuel.bfr.autreDette %}
                                                    <td>{{ infoBilanMensuel.bfr.autreDette.sommeValeur|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                                {% else %}
                                                    <td>0</td>
                                                {% endif %}
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold top_bar">
                                            <td>BFR d'exploitation</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.bfr.sommeValeur|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>

                                        <tr class="bold_sp">
                                            <td colspan="25">Cash flow</td>
                                        </tr>
                                        <tr>
                                            <td>EBE</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.ebe|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Variation de BFR</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.variationBfr|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Flux d'exploitation</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.fluxExploitation|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Flux d'activité</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.fluxActivite|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Investissements</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.investissement|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold top_bar">
                                            <td>Free cash flow</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.freeCashFlow|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Flux de financement</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.fluxFinancement|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Flux de trésorerie</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>
                                                    {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                        {{ infoBilanMensuel.tresorerie.fluxTresorerie.fluxDeTresorerie|formatNumber(null,null,(trialMode and not firstYear))}}
                                                    {% else %}
                                                        -
                                                    {% endif %}
                                                </td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold_sp">
                                            <td colspan="25">Bilan</td>
                                        </tr>
                                        <tr>
                                            <td>Actif immobilisé</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.actifsImmobilises.totalActifImmobilise|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>BFR d'exploitation</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.bfr.sommeValeur|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Emprunts bancaires</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.tresorerie.sommeEmpruntBancaire|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Comptes courants associés</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.tresorerie.soldeCompteCourantAssocie|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Subvention remboursables</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ (infoBilanMensuel.tresorerie.sommeSubventionRemboursable * -1)|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                        <tr class="bold top_bar">
                                            <td>Trésorerie clôture</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                {% if infoBilanMensuel.tresorerie.fluxTresorerie %}
                                                    <td>{{ infoBilanMensuel.tresorerie.fluxTresorerie.tresorerieCloture|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                                {% else %}
                                                    <td>N.D.</td>
                                                {% endif %}
                                            {% endfor %}
                                        </tr>
                                        <tr>
                                            <td>Capitaux propres</td>
                                            {% for infoBilanMensuel in bp.infoBilanMensuel if infoBilanMensuel.numExercice == (key+1) %}
                                                <td>{{ infoBilanMensuel.capitauxPropres|formatNumber(null,null,(trialMode and not firstYear))}}</td>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                        <!-- BODY -->
                    </div>
                    <!-- FOOTER -->
                    <div class="card-action color">
                        {% set page = page + 1 %}
                        <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                    </div>
                    <!-- FOOTER -->
                </div>
            {% endfor %}

            <!-- ============================================================= -->
            <!-- Lexique ===================================================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Lexique</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <div class="row">
                        <div class="col s6">
                            <p class="padding_block"><b class="text_color">Effet volume</b></p>
                            <p class="padding_block">L'effet volume permet de mettre en évidence l'impact sur le chiffre d'affaires de la
                                hausse (positif) ou de la baisse (négatif) des quantités globales vendues par
                                l'entreprise entre 2 périodes.
                                Exemple : Le CA augmente de 1000 € entre l'année 1 et l'année 2 car l'entreprise a
                                vendu 100 unités supplémentaires à prix unitaire moyen de 10 €.</p><br>
                            <p class="padding_block"><b class="text_color">Effet mix</b></p>
                            <p class="padding_block">L'effet mix permet de mettre en évidence l'impact de l'augmentation ou de la
                                diminution des ventes d'un produit ayant un prix différent du prix moyen des produits
                                vendus par l'entreprise.
                                Exemple : A quantités vendues égales, le CA progresse de 1000 € entre l'année 1 et
                                l'année 2 car l'organisation a vendu +1 produit A au prix unitaire de 2 000 € et -1
                                produit B au prix unitaire de 1 000 €.</p><br>
                            <p class="padding_block"><b class="text_color">Effet prix</b></p>
                            <p class="padding_block">L'effet prix permet de mettre en évidence l'impact de la hausse (positif) ou de la baisse
                                (négatif) des prix de ventes.
                                Exemple : Le CA augmente de 1 000 € entre l'année 1 et l'année 2 en raison d'une
                                augmentation des prix de ventes de 10 € sur l'ensemble des 100 unités vendues.</p><br>
                            <p class="padding_block"><b class="text_color">MB</b></p>
                            <p class="padding_block">La Marge Brute d'une organisation correspond à la différence entre le prix de vente et
                                le prix d'achat (différent du prix de revient) d'un produit. Ce montant permet par
                                conséquent de financer les charges de strcuture de l'organisation (charges externes,
                                personnel, impôts et taxes...).
                                Exemple : Votre organisation achète un produit A à 100 € l'unité et le revend à 300 €,
                                soit une marge de 200 € (taux de marge de 67%). Si 1 000 unités sont vendus sur
                                l'exercice, alors la marge brute de 200 000 € permettra de payer les frais de structure
                                de 140 000 € (loyers, rémunérations des salariés, impôts et taxes...) et de laisser un
                                bénéfice de 60 000 € qui permettra de rémunérer les pourvoyeurs de fonds
                                (actionnaires, banquiers...).</p><br>
                        </div>
                        <div class="col s6">
                            <p class="padding_block"><b class="text_color">EBE</b></p>
                            <p class="padding_block">L'Excédent Brut d'Exploitation permet de mettre en évidence la rentabilité d'une
                                entreprise et de la comparer à celle de ses concurrents sans que celle-ci soit impactée
                                par sa structure capitalistique (dimension et modèle de financement de l'outil de
                                production). Il permet également de faire ressortir le niveau de dégagement de
                                trésorerie théorique de l'entreprise si toutes les ventes et tous les achats faisaient
                                l'objet d'un encaissement ou d'un décaissement immédiat.
                                Exemple : Une organisation A dégage un EBE de 100 K€. Son outil de production
                                est entièrement amorti et il n'existe plus de dette financière dans la structure. Une
                                organisation B dégage également un EBE de 100 K€. Son outil de production fait
                                l'objet d'un amortissement annuel de l'ordre de 90 K€ et le financement de cet outil
                                présente un versement d'intérêts à la banque de 10 K€. Ces deux organisations de
                                rentabilité identique n'offre pas la même performance à leurs actionnaires.</p><br>
                            <p class="padding_block"><b class="text_color">REx</b></p>
                            <p class="padding_block">Le Résultat d'Exploitation permet de mettre en évidence la rentabilité d'une
                                organisation et de la comparer à celle de ses concurrents sans que celle-ci soit
                                impactée par sa structure de financement. Il informe également sur le niveau de
                                rémunération normatif théorique que peut offrir l'organisation à ses actionnaires (avant
                                paiement de l'impôt sur les sociétés).
                                Exemple : Une organisation A dégage un REx de 100 K€. Sa dette financière génère le
                                paiement d'intérêts à hauteur de 10 K€. Une organisation B dégage également un REx
                                de 100 K€. Sa dette financière génère le paiement d'intérêts à hauteur de 70 K€. Ces
                                deux organisations de rentabilité identique n'offre pas la même performance à leurs
                                actionnaires car les intérêts devront être payées aux créanciers avant toute rétribution
                                aux actionnaires.</p><br>
                        </div>
                    </div>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- Lexique ======================================== -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- HEADRE -->
                    <div class="row">
                        <div class="col s4">
                            <h3>Lexique</h3><hr>
                        </div>
                    </div>
                    <!-- /HEADER -->
                    <!-- BODY -->
                    <!-- BODY -->
                    <div class="row">
                        <div class="col s6">
                            <p class="padding_block"><b class="text_color">BFR</b></p>
                            <p class="padding_block">Le Besoin en Fonds de Roulement désigne le montant d'argent dont l'organisation doit
                                disposer pour fonctionner au quotidien (achat de stocks et règlement des clients à X
                                jours compensés par paiement des fournisseurs à Y jours et des dettes fiscales et
                                sociales à Z jours) hors financement de l'outil de production.
                                Exemple : Une organisation vend un produit A dont la fabrication nécessite la
                                constitution d'un stock de matière première de 10 K€. Les ventes sont encaissées à 30
                                jours et donc les créances clients représentent 20 K€. A l'inverse les achats sont payés
                                à 60 jours et représentent en moyenne 12 K€. Le BFR de cette organisation ressort
                                ainsi à 18 K€, ce qui implique qu'avant de démarre son activité, l'organisation devra
                                disposer de 18 K€ de trésorerie, quel qu'ait été le montant d'investissement de l'outil
                                de production (achat de machines...).</p><br>
                            <p class="padding_block"><b class="text_color">EFR</b></p>
                            <p class="padding_block">L'Excédent en Fonds de Roulement correspond aux situations dans lesquelles le
                                Besoin en Fonds de Roulement est négatif. Cela signifie que les dettes à payer sont
                                supérieures aux actifs circulants, ce qui justifie d'un dégagement de trésorerie.
                                Exemple : L'organisation A vend un produit X qu'elle achète uniquement sur
                                commande (son stock est donc nul). Ses clients paient comptant (c’est-à-dire sans
                                délai). Cependant l'organisation paie ses fournisseurs à 60 jours. Ainsi, quel que soit
                                les quantités vendues, les dettes à payer seront toujours supérieures aux actifs
                                circulants, c'est à dire que l'organisation dispose d'une trésoerie qu'elle devra en partie
                                reverser à ses fournisseurs et que par conséquent elle ne nécessite d'aucun besoin de
                                trésorerie pour démarrer son activité.</p><br>
                        </div>
                        <div class="col s6">

                            <p class="padding_block"><b class="text_color">Flux d'exploitation</b></p>
                            <p class="padding_block">Le flux d'exploitation représente les mouvements générés par l'activité courante de
                                l'entité. Son importance est capitale car déterminante de la rentabilité et de la solidité
                                d'une entité.
                                En effet une société peut être bénéficiaire globalement, mais uniquement grâce à une
                                cession massive de participations ou d'immobilisations, ce flux n'indique que le produit
                                tiré de l'unique exploitation courante de l'activité.</p><br>
                            <p class="padding_block"><b class="text_color">Free cash flow</b></p>
                            <p class="padding_block">Le free cash flow (FCF) représente les sommes d'argent qu’une entreprise peut
                                générer après avoir dépensé les frais nécessaires à l’entretien ou au développement
                                de son actif.
                                Le flux de trésorerie disponible est important car il permet à l’entreprise de pouvoir
                                saisir des opportunités d’investissement et créer de la valeur pour les actionnaires.</p>
                        </div>
                    </div>
                    <!-- /BODY -->
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }} </span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- page de fin ================================================= -->
            <!-- ============================================================= -->

            <div class="card">
                <div class="card-content">
                    <!-- BODY -->
                    <h5 class="center"><hr>{{ nameCorporate }}</h5>
                    <p class="center">{{ email }}</p>
                    <p class="center">{{ information.address.street ~ ' ' ~ information.address.codePostal ~ ' ' ~ information.address.city }}</p>
                    <!-- /BODY -->
                </div>
                <!-- FOOTER -->
                <div class="card-action color">
                    {% set page = page + 1 %}
                    <div>Business Plan {{ nameCorporate }} | {{ "now"|date("d/m/Y") }} <span class="right">Page {{ page }}</span></div>
                </div>
                <!-- FOOTER -->
            </div>

            <!-- ============================================================= -->
            <!-- ============================================================= -->
            <!-- ============================================================= -->

            {% if pdf == false %}
                <div style="position: fixed; top: 20px; width:29.7cm; text-align: center">
                    <button class="btn btn-large izy-color-primary-bg  waves-effect waves-light" onclick="document.location.reload(true);"><i class="material-icons left">cached</i>Actualiser</button>
                </div>
            {%endif%}
        </div>
        <!--END_BLOC_BODY -->


        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    
        {{ encore_entry_script_tags('apppdf') }}
        <!--======================-->
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/highcharts-more.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <!-- Compiled and minified JavaScript -->
         <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
        <script>
                        window.onbeforeunload = function () {

                            if (Cookies.get('{{bp.hash}}')) {
                                Cookies.remove('{{bp.hash}}');
                            }
                        };
        </script>
    </body>
</html>
